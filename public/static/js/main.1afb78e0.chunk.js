(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{112:function(e,t,a){e.exports=a(145)},133:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),l=a.n(o),c=a(18),i=a(8),s=a(6),u=a(10),m=a(11),p=a(12),d=a(40),h=a.n(d),f=new(function(){function e(){Object(i.a)(this,e),this.auth=h.a.create({baseURL:"https://project-bio.herokuapp.com/",withCredentials:!0})}return Object(s.a)(e,[{key:"signup",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/signup",{email:t,password:a}).then((function(e){return e.data}))}},{key:"refresh",value:function(e){return this.auth.get("/auth/refresh/".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/login",{email:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),g=r.a.createContext(),E=g.Consumer,v=g.Provider,b=function(e){return function(t){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(E,null,(function(a){var n=a.login,o=a.signup,l=a.logout,c=a.user,i=a.refresh,s=a.isLoggedIn;return r.a.createElement(e,Object.assign({user:c,isLoggedIn:s,refresh:i,login:n,signup:o,logout:l},t.props))}))}}]),a}(n.Component)},k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,user:null,isLoading:!0},a.refresh=function(e){f.refresh(e).then((function(e){return a.setState({user:e}),e})).catch((function(e){return console.log(e)}))},a.signup=function(e,t){f.signup({email:e,password:t}).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},a.login=function(e,t){f.login({email:e,password:t}).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},a.logout=function(){f.logout().then((function(){return a.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedIn,n=e.user,o=this.login,l=this.logout,c=this.signup,i=this.refresh;return r.a.createElement(v,{value:{isLoading:t,isLoggedIn:a,user:n,login:o,logout:l,signup:c,refresh:i}},t?"is loading":this.props.children)}}]),t}(r.a.Component),y=(a(133),a(47)),O=a(9),j=a(97),C=a(32),S=a(59),x=a(190),w=a(216),F=a(200),I=a(193),L=a(199),R=a(195),D=a(197),B=a(198),_=a(48),M=a.n(_),A=Object(x.a)({list:{width:250},fullList:{width:"auto"}});var T=b((function(e){var t,a=A(),n=r.a.useState({top:!1,left:!1,bottom:!1,right:!1}),o=Object(C.a)(n,2),l=o[0],i=o[1],s=function(e,t){return function(a){(!a||"keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&i(Object(j.a)({},l,Object(O.a)({},e,t)))}};return r.a.createElement("div",null,r.a.createElement(F.a,{onClick:s("right",!0)},"Menue"),r.a.createElement(w.a,{anchor:"right",open:l.right,onClose:s("right",!1),onOpen:s("right",!0)},(t="right",r.a.createElement("div",{className:a.list,role:"presentation",onClick:s(t,!1),onKeyDown:s(t,!1)},e.isLoggedIn?r.a.createElement(I.a,null,r.a.createElement(S.a,{className:a.root},r.a.createElement(R.a,{button:!0,key:"Search",component:c.b,to:"/"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"Search (Home)"})),r.a.createElement(R.a,{button:!0,key:"My Collections",component:c.b,to:"/collections"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"My Collections"})),r.a.createElement(R.a,{button:!0,key:"My Library",component:c.b,to:"/library"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"My Library"})),r.a.createElement(L.a,null),r.a.createElement(R.a,{button:!0,key:"Logout",onClick:e.logout},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"Logout"})))):r.a.createElement(I.a,null,r.a.createElement(R.a,{button:!0,key:"Search",component:c.b,to:"/"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"Search (Home)"})),r.a.createElement(L.a,null),r.a.createElement(R.a,{button:!0,key:"Login",component:c.b,to:"/login"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"Login"})),r.a.createElement(R.a,{button:!0,key:"Sign Up",component:c.b,to:"/signup"},r.a.createElement(D.a,null,r.a.createElement(M.a,null)),r.a.createElement(B.a,{primary:"Sign Up"})))))))})),N=a(21),U=a.n(N),P=a(33);function q(e,t,a){t||(t="");var n=a||a<40?a:10;return e.length>2?h.a.get("".concat("https://www.googleapis.com/books/v1/volumes","?q=").concat(t).concat(e,"&key=").concat("AIzaSyD_mH2FaBJych4OrXJ8OfsnQ1Uwh9z6kHs","&maxResults=").concat(n)).then((function(e){return e.data.items})).catch((function(e){console.log(e)})):[]}function H(e){return W.apply(this,arguments)}function W(){return(W=Object(P.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat("https://www.googleapis.com/books/v1/volumes","/").concat(t,"?&key=").concat("AIzaSyD_mH2FaBJych4OrXJ8OfsnQ1Uwh9z6kHs")).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var z=a(201),J=a(202),G=a(205),V=a(204),K=a(203),Q=a(19);function X(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(P.a)(U.a.mark((function e(t,a,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.patch("".concat("https://project-bio.herokuapp.com/","/collections/id/").concat(t),{items:a,name:n}).then((function(e){var t=e.data;return console.log("this is the response from modify Collection ",t)})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in modifyCollection: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Z(e,t,a){return $.apply(this,arguments)}function $(){return($=Object(P.a)(U.a.mark((function e(t,a,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat("https://project-bio.herokuapp.com/","/collections"),{owner:t,items:a,name:n}).then((function(e){var t=e.data;return console.log("this is the response data ",t)})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in createCollectionWithItems: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(P.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("".concat("https://project-bio.herokuapp.com/","/id/").concat(t)).then((function(e){var t=e.data;return console.log("this is the response from delete Collection ",t)})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in deleteCollection: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var ae=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={defaultCollection:null,loading:!0},a.getdefaultList=function(){return a.props.user.collections.filter((function(e){return!0===e.default}))[0]},a.onDefaulftList=function(){return a.state.defaultCollection.items.includes(a.props.bookId)},a.addToCollection=function(e){var t=a.getItemList(a.state.defaultCollection._id),n=[];n.push.apply(n,[a.props.bookId].concat(Object(Q.a)(t))),X(a.state.defaultCollection._id,n,a.state.defaultCollection.name),a.props.refresh(a.props.user._id),a.forceUpdate()},a.removeFromCollection=function(e){var t=a.getItemList(a.state.defaultCollection._id),n=t.indexOf(a.props.bookId);n>-1&&t.splice(n,1),X(a.state.defaultCollection._id,t,a.state.defaultCollection.name),a.props.refresh(a.props.user._id),a.forceUpdate()},a.getItemList=function(e){return a.props.user.collections.filter((function(t){return t._id===e}))[0].items},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getdefaultList();this.setState({defaultCollection:t},(function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.getdefaultList(),t=e._id,a=e.name,n=e.items;return r.a.createElement(r.a.Fragment,null,n.includes(this.props.bookId)?r.a.createElement(F.a,{size:"small",color:"primary",key:t,onClick:this.removeFromCollection.bind(t),id:t,bookid:this.props.bookId,name:a,variant:"contained"},"#",a):r.a.createElement(F.a,{key:t,onClick:this.addToCollection.bind(t),id:t,bookid:this.props.bookId,name:a,variant:"outlined",size:"small",color:"primary"},"#",a))}}]),t}(n.Component)),ne=Object(x.a)({root:{}});var re=b((function(e){var t=ne(),a=e.book.volumeInfo.imageLinks?e.book.volumeInfo.imageLinks.thumbnail:"images/Image-Coming-Soon.png",n=e.book.volumeInfo.title?e.book.volumeInfo.title:"Without title",o=e.book.volumeInfo.authors?e.book.volumeInfo.authors.map((function(e){return" "+e})):"Unknown Authors",l=o.length>40?o.slice(40,o.length)+"...":o;return r.a.createElement(z.a,{className:t.root,key:e.book.id},r.a.createElement(J.a,{component:c.b,to:"/book/".concat(e.book.id)},r.a.createElement(K.a,{component:"img",alt:n,height:"250",image:a,title:n}),r.a.createElement(V.a,null,r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},l))),r.a.createElement(G.a,null,e.user&&e.showDefault?r.a.createElement(ae,{bookId:e.book.id}):r.a.createElement(F.a,{size:"small",color:"secondary",component:c.b,to:"/login"},"log in to continue")))})),oe=a(214),le=a(207),ce=a(217),ie=a(220),se=a(99),ue=a.n(se),me=a(208),pe=a(206),de=a(215),he=Object(x.a)((function(e){return{root:{"& > *":{margin:e.spacing(2)}}}}));function fe(e){var t=he();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{item:!0,xs:12,className:t.root},r.a.createElement(de.a,{p:"0"},r.a.createElement(oe.a,{className:t.margin,label:"Search for books here",variant:"outlined",fullWidth:!0,noValidate:!0,autoComplete:"off",name:"query",value:e.query,onChange:e.handleChange,InputProps:{startAdornment:r.a.createElement(le.a,{position:"start"},r.a.createElement(ue.a,null))}}))),r.a.createElement(pe.a,{item:!0,xs:12,gutterBottom:!0},r.a.createElement(S.a,{gutterBottom:!0,variant:"caption"},r.a.createElement(ie.a,{name:"searchFilter",row:!0},r.a.createElement(pe.a,{container:!0,spacing:0,direction:"row",justify:"space-around",alignItems:"flex-start"},r.a.createElement(me.a,{value:"",control:r.a.createElement(ce.a,{color:"primary"}),label:"All",name:"searchFilter",checked:""===e.searchFilter,onChange:e.handleSearchSettings,labelPlacement:"bottom"}),r.a.createElement(me.a,{value:"intitle:",control:r.a.createElement(ce.a,{color:"primary"}),label:"Title",name:"searchFilter",checked:"intitle:"===e.searchFilter,onChange:e.handleSearchSettings,labelPlacement:"bottom"}),r.a.createElement(me.a,{value:"inauthor:",control:r.a.createElement(ce.a,{color:"primary"}),label:"Author",name:"searchFilter",checked:"inauthor:"===e.searchFilter,onChange:e.handleSearchSettings,labelPlacement:"bottom"}),r.a.createElement(me.a,{value:"inpublisher:",control:r.a.createElement(ce.a,{color:"primary"}),label:"Publisher",name:"searchFilter",checked:"inpublisher:"===e.searchFilter,onChange:e.handleSearchSettings,labelPlacement:"bottom"}))))))}var ge=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={searchFilter:"",query:"",results:[],visibleResults:[],expandedSearch:!1},a.toggleExpandedSearch=function(){a.setState({expandedSearch:!a.state.expandedSearch}),a.state.expandedSearch?a.setState({visibleResults:a.state.results.slice(0,4)}):a.setState({visibleResults:a.state.results})},a.formHandleChange=function(){var e=Object(P.a)(U.a.mark((function e(t){var n,r,o,l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target,r=n.value,o=n.name,a.setState(Object(O.a)({},o,r)),e.prev=3,e.next=6,q(r,a.state.searchFilter,40);case 6:l=e.sent,a.state.expandedSearch?a.setState({visibleResults:l}):a.setState({visibleResults:l.slice(0,4)}),a.setState({results:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSearchSettings=function(e){console.log(e.taget),a.setState({searchFilter:e.target.value})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.user&&this.props.refresh(this.props.user._id)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{container:!0,spacing:0,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(fe,{handleChange:this.formHandleChange,query:this.state.query,searchFilter:this.state.searchFilter,handleSearchSettings:this.handleSearchSettings})),r.a.createElement(de.a,{my:"15px"},r.a.createElement(pe.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"flex-start"},this.state.visibleResults.map((function(e){return r.a.createElement(pe.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:e.id},r.a.createElement(re,{book:e,showDefault:!0}))})))),r.a.createElement(de.a,{my:"15px"},r.a.createElement(pe.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2},this.state.results.length>3?this.state.expandedSearch?r.a.createElement(F.a,{variant:"contained",color:"primary",onClick:this.toggleExpandedSearch},"Show less results"):r.a.createElement(F.a,{mt:4,variant:"contained",color:"primary",onClick:this.toggleExpandedSearch},"Show more results"):null,this.state.expandedSearch?null:this.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(F.a,{variant:"contained",color:"secondary",component:c.b,to:"/collections"},"Go to collections")),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(F.a,{variant:"contained",color:"secondary",component:c.b,to:"/library"},"Go to library"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(F.a,{variant:"contained",color:"secondary",component:c.b,to:"/login"},"Login")),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(F.a,{variant:"contained",color:"secondary",component:c.b,to:"/signup"},"Signup"))))))}}]),t}(n.Component));var Ee=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{paragraph:!0,variant:"h3"},"Books I Own"),r.a.createElement(S.a,{paragraph:!0,variant:"subtitle1"},"Manage your books ",r.a.createElement("strong",null,"as easy as never before"),"."),r.a.createElement(ge,null))},ve=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.signup(n,r)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(O.a)({},n,r))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleFormSubmit},r.a.createElement(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"text",value:t,onChange:this.handleChange}),r.a.createElement(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:a,onChange:this.handleChange}),r.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",value:"Signup"},"Sign Up"),r.a.createElement(pe.a,{container:!0},r.a.createElement(pe.a,{item:!0},r.a.createElement("p",null,"Already have account?"),r.a.createElement(c.b,{to:"/login"}," Login")))))}}]),t}(n.Component)),be=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.login(n,r)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(O.a)({},n,r))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement(S.a,{component:"h1",variant:"h5"},"Welcome back! Log in here"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleFormSubmit},r.a.createElement(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"text",value:t,onChange:this.handleChange}),r.a.createElement(oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:a,onChange:this.handleChange}),r.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",value:"Signup"},"Login"),r.a.createElement(pe.a,{container:!0},r.a.createElement(pe.a,{item:!0},r.a.createElement("p",null,"Don't have an account?"),r.a.createElement(c.b,{to:"/signup"}," Sign up")))))}}]),t}(n.Component)),ke=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={query:""},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.value,r=t.name;a.props.filterList(n),a.setState(Object(O.a)({},r,n))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("input",{type:"text",name:"query",value:this.state.query,onChange:this.handleChange,placeholder:"Filter by title"})))}}]),t}(n.Component),ye=a(146),Oe=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={newCollection:""},a.addToCollection=function(e,t){var n=a.getItemList(e),r=[];r.push.apply(r,[a.props.bookId].concat(Object(Q.a)(n))),X(e,r,t),a.props.refresh(a.props.user._id),a.forceUpdate()},a.removeFromCollection=function(e,t){var n=a.getItemList(e),r=n.indexOf(a.props.bookId);r>-1&&n.splice(r,1),X(e,n,t),a.props.refresh(a.props.user._id),a.forceUpdate()},a.getItemList=function(e){return a.props.user.collections.filter((function(t){return t._id===e}))[0].items},a.formHandleChange=function(){var e=Object(P.a)(U.a.mark((function e(t){var n,r,o;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target,r=n.value,o=n.name," "===r[r.length-1]&&(r=r.slice(0,-1)),a.setState(Object(O.a)({},o,r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.addToNewColl=function(e){e.preventDefault(),Z(a.props.user._id,[a.props.bookId],a.state.newCollection),a.setState({newCollection:""},(function(){return a.props.refresh(a.props.user._id)}))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(pe.a,{container:!0,spacing:3},r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(ye.a,null,r.a.createElement(de.a,{p:"20px"},r.a.createElement(pe.a,{item:!0,cs:12},r.a.createElement(S.a,{variant:"caption"},"Click to add or remove from your collections:")),r.a.createElement(pe.a,{item:!0,cs:12},r.a.createElement(pe.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},this.props.user.collections.map((function(t){return t.items.includes(e.props.bookId)?r.a.createElement(de.a,{mr:"15px",my:"5px"},r.a.createElement(F.a,{size:"small",color:"primary",key:t._id,onClick:function(){return e.removeFromCollection(t._id,t.name)},id:t._id,bookid:e.props.bookId,name:t.name,variant:"contained"},"#",t.name)):r.a.createElement(de.a,{mr:"15px",my:"5px"},r.a.createElement(F.a,{key:t._id,onClick:function(){return e.addToCollection(t._id,t.name)},id:t._id,bookid:e.props.bookId,name:t.name,variant:"outlined",size:"small",color:"primary"},"#",t.name))})),r.a.createElement(de.a,{mr:"15px",my:"5px"},r.a.createElement(F.a,{variant:"outlined",size:"small",color:"primary"},r.a.createElement("form",null,"#",r.a.createElement("input",{type:"text",name:"newCollection",className:"hiddenAddField",placeholder:"newCollection",onChange:this.formHandleChange,value:""+this.state.newCollection}),r.a.createElement("button",{type:"submit",bookid:this.props.bookId,onClick:this.addToNewColl},r.a.createElement(S.a,null,"ADD")))))))))))}}]),t}(n.Component)),je=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={books:null,loading:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({books:this.props.loadedbooks},(function(){return e.setState({loading:!0})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.loadedBooks.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(re,{book:e}),r.a.createElement(Oe,{bookId:e.id}))})))}}]),t}(n.Component)),Ce=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={allBookIds:[],loadedBooks:[],loadedBooksDisplay:[],loading:!0,nrOfAllBooks:0,nrOfBooksLoaded:0,nrOfBooksPerLoad:10},a.consolidateBookIds=function(){var e=[];a.props.user.collections.forEach((function(t){t.items.map((function(t){return e.push(t)}))}));var t=new Set(e);return Object(Q.a)(t)},a.loadBooks=function(e){var t=e.map((function(e){return H(e)}));return Promise.all(t)},a.filterList=function(e){var t=Object(Q.a)(a.state.loadedBooks);t=t.filter((function(t){return t.volumeInfo.title.toLowerCase().includes(e.toLowerCase())})),a.setState({loadedBooksDisplay:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=this.consolidateBookIds();e=a,this.setState({allBookIds:e},(function(){t.loadBooks(e).then((function(e){t.setState({loadedBooks:e,loadedBooksDisplay:e},(function(){return t.setState({loading:!1})}))}))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"My Library"),r.a.createElement("h2",null,"See all your books, ",this.props.user.email),this.state.loading?"Books are getting loaded":r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{filterList:this.filterList}),r.a.createElement(je,{loadedBooks:this.state.loadedBooksDisplay})))}}]),t}(n.Component)),Se=a(209),xe=a(74),we=a.n(xe),Fe=a(100),Ie=a.n(Fe),Le=a(147),Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={markedForRemoval:!1,buttonText:"Remove"},a.ListItemLink=function(e){return r.a.createElement(R.a,Object.assign({button:!0,component:"a"},e))},a.toggleRemove=function(e){e.preventDefault();var t=!a.state.markedForRemoval,n="Remove"===a.state.buttonText?"Keep":"Remove";a.setState({markedForRemoval:t,buttonText:n}),t?a.props.doMarkForRemove(a.props.book.id):a.props.undoMarkForRemove(a.props.book.id)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(R.a,{key:this.props.book.id},r.a.createElement(this.ListItemLink,{href:"/book/".concat(this.props.book.id)},r.a.createElement(B.a,{primaryTypographyProps:{color:this.state.markedForRemoval?"textSecondary":"textPrimary"},primary:this.props.book.volumeInfo.title?this.props.book.volumeInfo.title:null,secondary:this.props.book.volumeInfo.authors?this.props.book.volumeInfo.authors.map((function(e){return e})):null})),r.a.createElement(Se.a,null,r.a.createElement(Le.a,{edge:"end","aria-label":"delete",onClick:this.toggleRemove},this.state.markedForRemoval?r.a.createElement(Ie.a,null):r.a.createElement(we.a,null))))}}]),t}(n.Component),De=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={itemsToRemove:"",booklist:!1,edited:!1,itemsResolved:[],loading:!1},a.doMarkForRemove=function(e){var t=[];t.push.apply(t,[e].concat(Object(Q.a)(a.state.itemsToRemove))),a.setState({itemsToRemove:t},(function(){a.sthToSaveUpdater(),console.log(a.state.itemsToRemove)}))},a.undoMarkForRemove=function(e){var t=a.state.itemsToRemove,n=t.indexOf(e);n>-1&&t.splice(n,1),a.setState({itemsToRemove:t},(function(){a.sthToSaveUpdater(),console.log(a.state.itemsToRemove)}))},a.sthToSaveUpdater=function(){"object"==typeof a.state.itemsToRemove&&a.state.itemsToRemove.length>0?a.setState({edited:!0},(function(){return console.log("s.th. to update later? ",a.state.edited)})):a.setState({edited:!1},(function(){return console.log("s.th. to update later? ",a.state.edited)}))},a.toggleBookList=function(){a.state.booklist||a.loadBooks(),a.setState({booklist:!a.state.booklist})},a.saveChanges=function(e){var t=a.props.items;a.state.itemsToRemove.forEach((function(e){var a=t.indexOf(e);a>-1&&t.splice(a,1)})),X(a.props.collid,t,a.props.collName),a.props.refresh(a.props.user._id),a.setState({itemsResolved:[]})},a.loadBooks=function(){0===a.state.itemsResolved.length&&(a.setState({loading:!0}),a.props.items.forEach((function(e){H(e).then((function(e){var t=[];t.push.apply(t,[e].concat(Object(Q.a)(a.state.itemsResolved))),a.setState({itemsResolved:t},(function(){a.state.itemsResolved.length===a.props.items.length&&a.setState({loading:!1},(function(){return console.log("finished loading: ",a.state.itemsResolved)}))}))}))})))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.toggleBookList()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.loading?"Currently loading":r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,r.a.createElement(R.a,null,this.state.edited?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{primary:"Click to onfirm deletion"}),r.a.createElement(Se.a,null,r.a.createElement(Le.a,{edge:"start",onClick:this.saveChanges},r.a.createElement(we.a,null)))):r.a.createElement(B.a,{primary:"Mark your books for removal"}))),r.a.createElement(L.a,null),r.a.createElement(I.a,null,this.state.itemsResolved.map((function(t){return r.a.createElement(Re,{key:t.id,book:t,doMarkForRemove:e.doMarkForRemove,undoMarkForRemove:e.undoMarkForRemove})})))))}}]),t}(n.Component)),Be=a(219),_e=a(211),Me=a(210),Ae=a(101),Te=a.n(Ae),Ne=b(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={newName:"",editmode:!1,expanded:""},a.nameEditField=function(e){e.preventDefault(),a.setState({editmode:!0,newName:a.props.collection.name})},a.formHandleChange=function(e){e.preventDefault();var t=e.target,n=t.value,r=t.name;a.setState(Object(O.a)({},r,n))},a.saveName=function(){var e=Object(P.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.state.newName===a.props.collection.name){e.next=10;break}return e.prev=2,e.next=5,X(a.props.collection._id,a.props.collection.items,a.state.newName);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("error while saving",e.t0);case 10:a.props.refresh(a.props.user._id),a.setState({editmode:!1,newName:""});case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),a.setExpanded=function(e){e===a.state.expanded?a.setState({expanded:""}):a.setState({expanded:e})},a.deleteCollection=function(){ee(a.props.collection._id),a.props.refresh(a.props.user._id)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.collection,a=t.name,n=t.items,o=t._id;return r.a.createElement(Be.a,{expanded:this.state.expanded===o,onChange:function(){return e.setExpanded(o)}},r.a.createElement(Me.a,{expandIcon:r.a.createElement(Te.a,null),"aria-controls":"panel1bh-content",id:o},r.a.createElement(S.a,{vairant:"body1"},"#",a),r.a.createElement(de.a,{ml:"10px"},r.a.createElement(S.a,{variant:"caption",color:"secondary"},n.length," item(s)"))),r.a.createElement(_e.a,null,r.a.createElement(S.a,null,this.state.expanded&&n.length>0?r.a.createElement(De,{key:o,collid:o,collName:a,items:n}):r.a.createElement(de.a,null,r.a.createElement("p",null,'"No books in that collection."'),r.a.createElement(F.a,{variant:"contained",color:"primary",onClick:this.deleteCollection}," Delete?")))))}}]),t}(n.Component)),Ue=b(function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.refresh(this.props.user._id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"My Collections"),r.a.createElement(r.a.Fragment,null,this.props.user.collections.map((function(e){return r.a.createElement(Ne,{key:e._id,collection:e})}))))}}]),t}(n.Component)),Pe=a(14),qe=a.n(Pe),He=a(58),We=a.n(He),ze=a(17),Je=a.n(ze),Ge=Object(x.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function Ve(e){var t,a,n=e.book.volumeInfo,o=n.title,l=n.subtitle,c=n.authors,i=n.publisher,s=n.publishedDate,u=n.description,m=n.imageLinks,p=n.averageRating,d=n.ratingsCount,h=Ge();return r.a.createElement(pe.a,{container:!0,spacing:3},r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(ye.a,{className:h.paper},r.a.createElement(pe.a,{container:!0,spacing:3},r.a.createElement(pe.a,{item:!0,xs:12,md:6,id:"imageContainer"},m.small?r.a.createElement("img",{src:(a=m.small,a.replace("http:","https:")),alt:""}):r.a.createElement("img",{src:"images/Image-Coming-Soon.png",alt:""})),r.a.createElement(pe.a,{item:!0,xs:12,md:6,id:"textContainer"},r.a.createElement(pe.a,{container:!0,spacing:3},r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(S.a,{align:"left",gutterBottom:!0},r.a.createElement("h1",null,o||"Without title"),l?r.a.createElement("h2",null,l):null)),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(S.a,{align:"left",gutterBottom:!0},c?"From "+c.map((function(e){return e+" "})):"Unknown Authors")),r.a.createElement(pe.a,{item:!0,xs:6},r.a.createElement(de.a,null,!d||d<2?"not rated":"Rating: "+p+" (From "+d+" votes."),r.a.createElement(de.a,null,!d||d<2?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):r.a.createElement(r.a.Fragment,null," ",(t=p)<.5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<1?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(We.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<1.5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<2?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(We.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<2.5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<3?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(We.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<3.5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(qe.a,null)," ",r.a.createElement(qe.a,null)):t<4?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(We.a,null)," ",r.a.createElement(qe.a,null)):t<4.5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(qe.a,null)):t<5?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(We.a,null)):r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null)," ",r.a.createElement(Je.a,null))," "))),r.a.createElement(pe.a,{item:!0,xs:6},i?"Published "+(s||null)+" by "+i:null),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(S.a,{align:"left",gutterBottom:!0},u?r.a.createElement("p",{dangerouslySetInnerHTML:{__html:u}}):"Description currently not available"))))))))}var Ke=b(function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={book:{},loading:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.refresh(this.props.user._id),H(this.props.match.params.id).then((function(t){console.log(t),e.setState({book:t},(function(){return e.setState({loading:!1})}))}))}},{key:"render",value:function(){return this.state.loading?"loading":r.a.createElement("div",null,r.a.createElement(Ve,{book:this.state.book}),r.a.createElement(Oe,{key:this.state.book.id,bookId:this.state.book.id}))}}]),t}(n.Component)),Qe=a(2);var Xe=b((function(e){var t=e.component,a=e.isLoggedIn,n=Object(Qe.a)(e,["component","isLoggedIn"]);return(r.a.createElement(y.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(y.a,{to:"/"}):a?void 0:r.a.createElement(t,e)}})))}));var Ye=b((function(e){var t=e.component,a=e.isLoggedIn,n=Object(Qe.a)(e,["component","isLoggedIn"]);return r.a.createElement(y.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):a?void 0:r.a.createElement(y.a,{to:"/login"})}}))})),Ze=(a(141),a(212)),$e=a(213),et=(a(142),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,null),r.a.createElement($e.a,{maxWidth:"md"},r.a.createElement(T,null),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/",component:Ee}),r.a.createElement(Xe,{exact:!0,path:"/signup",component:ve}),r.a.createElement(Xe,{exact:!0,path:"/login",component:be}),r.a.createElement(Ye,{exact:!0,path:"/collections",component:Ue}),r.a.createElement(Ye,{exact:!0,path:"/library",component:Ce}),r.a.createElement(Ye,{exact:!0,path:"/book/:id",component:Ke})))))}}]),t}(n.Component));l.a.render(r.a.createElement(c.a,null,r.a.createElement(k,null,r.a.createElement(et,null))),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.1afb78e0.chunk.js.map