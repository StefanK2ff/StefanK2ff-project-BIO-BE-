(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{38:function(e,t,n){e.exports=n(70)},59:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(35),l=n.n(r),i=n(6),s=n(1),c=n(2),u=n(4),p=n(3),h=n(5),m=n(17),d=n.n(m),f=new(function(){function e(){Object(s.a)(this,e),this.auth=d.a.create({baseURL:"https://project-bio.herokuapp.com/",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e){var t=e.email,n=e.password;return this.auth.post("/auth/signup",{email:t,password:n}).then((function(e){return e.data}))}},{key:"refresh",value:function(e){return this.auth.get("/auth/refresh/".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e){var t=e.email,n=e.password;return this.auth.post("/auth/login",{email:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),b=o.a.createContext(),v=b.Consumer,g=b.Provider,k=function(e){return function(t){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(c.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(v,null,(function(n){var a=n.login,r=n.signup,l=n.logout,i=n.user,s=n.refresh,c=n.isLoggedIn;return o.a.createElement(e,Object.assign({user:i,isLoggedIn:c,refresh:s,login:a,signup:r,logout:l},t.props))}))}}]),n}(a.Component)},E=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isLoggedIn:!1,user:null,isLoading:!0},n.refresh=function(e){f.refresh(e).then((function(e){return n.setState({user:e}),e})).catch((function(e){return console.log(e)}))},n.signup=function(e,t){f.signup({email:e,password:t}).then((function(e){return n.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e,t){f.login({email:e,password:t}).then((function(e){return n.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){f.logout().then((function(){return n.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedIn,a=e.user,r=this.login,l=this.logout,i=this.signup,s=this.refresh;return o.a.createElement(g,{value:{isLoading:t,isLoggedIn:n,user:a,login:r,logout:l,signup:i,refresh:s}},t?"is loading":this.props.children)}}]),t}(o.a.Component),y=(n(59),n(18)),O=k(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedIn;return o.a.createElement("nav",{className:"navbar"},o.a.createElement(i.b,{to:"/",id:"home-btn"},o.a.createElement("h4",null,"Home")),a?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"email: ",t.email),o.a.createElement(i.b,{to:"/collections",id:"home-btn"},o.a.createElement("h4",null,"My Collections")),o.a.createElement(i.b,{to:"/library",id:"home-btn"},o.a.createElement("h4",null,"My Library")),o.a.createElement("button",{onClick:n},"Logout")):o.a.createElement(o.a.Fragment,null,o.a.createElement(i.b,{to:"/login"}," ",o.a.createElement("button",{className:"navbar-button"},"Login")," "),o.a.createElement("br",null),o.a.createElement(i.b,{to:"/signup"}," ",o.a.createElement("button",{className:"navbar-button"},"Sign Up")," ")))}}]),t}(a.Component)),j=n(7),C=n.n(j),S=n(12),w=n(10);function L(e,t,n){t||(t="");var a=n||n<40?n:10;return e.length>2?d.a.get("".concat("https://www.googleapis.com/books/v1/volumes","?q=").concat(t).concat(e,"&key=").concat("AIzaSyD_mH2FaBJych4OrXJ8OfsnQ1Uwh9z6kHs","&maxResults=").concat(a)).then((function(e){return e.data.items})).catch((function(e){console.log(e)})):[]}function x(e){return I.apply(this,arguments)}function I(){return(I=Object(w.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat("https://www.googleapis.com/books/v1/volumes","/").concat(t,"?&key=").concat("AIzaSyD_mH2FaBJych4OrXJ8OfsnQ1Uwh9z6kHs")).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var R=k(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{key:this.props.book.id},o.a.createElement(i.b,{to:"/book/".concat(this.props.book.id)},o.a.createElement("img",{src:this.props.book.volumeInfo.imageLinks.smallThumbnail,alt:this.props.book.volumeInfo.title})),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/book/".concat(this.props.book.id)},this.props.book.volumeInfo.title)),this.props.book.volumeInfo.authors?o.a.createElement("li",null,this.props.book.volumeInfo.authors.map((function(e){return e}))):null,o.a.createElement("li",null,this.props.book.volumeInfo.publisher))}}]),t}(a.Component)),F=n(14);function B(e,t,n){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(C.a.mark((function e(t,n,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.patch("".concat("https://project-bio.herokuapp.com/","/collections/id/").concat(t),{items:n,name:a}).then((function(e){var t=e.data;return console.log("this is the response data ",t)})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in modifyCollection: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function D(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(w.a)(C.a.mark((function e(t,n,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat("https://project-bio.herokuapp.com/","/collections"),{owner:t,items:n,name:a}).then((function(e){var t=e.data;return console.log("this is the response data ",t)})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in createCollectionWithItems: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var N=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={defaultCollection:null,loading:!1},n.getdefaultList=function(){return n.props.user.collections.filter((function(e){return!0===e.default}))[0]},n.onDefaulftList=function(){return n.state.defaultCollection.items.includes(n.props.bookId)},n.addToLib=function(e){e.persist();var t=n.state.defaultCollection,a=[];a.push.apply(a,[e.target.id].concat(Object(F.a)(t.items))),B(t._id,a,t.name),n.props.refresh(n.props.user._id)},n.removeFromLib=function(e){e.persist();var t=n.state.defaultCollection,a=t.items,o=a.indexOf(e.target.id);o>-1&&a.splice(o,1),B(t._id,a,t.name),n.props.refresh(n.props.user._id)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getdefaultList();this.setState({defaultCollection:t},(function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.onDefaulftList()?o.a.createElement("input",{onClick:this.removeFromLib,type:"button",value:"Remove from default Collection "+this.state.defaultCollection.name,id:this.props.bookId}):o.a.createElement("input",{onClick:this.addToLib,type:"button",value:"Add to default Collection "+this.state.defaultCollection.name,id:this.props.bookId}))}}]),t}(a.Component)),M=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={searchFilter:"",query:"",results:[],visibleResults:[],expandedSearch:!1},n.toggleExpandedSearch=function(){n.setState({expandedSearch:!n.state.expandedSearch}),n.state.expandedSearch?n.setState({visibleResults:n.state.results.slice(0,4)}):n.setState({visibleResults:n.state.results})},n.formHandleChange=function(){var e=Object(w.a)(C.a.mark((function e(t){var a,o,r,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,o=a.value,r=a.name,n.setState(Object(S.a)({},r,o)),e.prev=3,e.next=6,L(o,n.state.searchFilter,40);case 6:l=e.sent,n.state.expandedSearch?n.setState({visibleResults:l}):n.setState({visibleResults:l.slice(0,4)}),n.setState({results:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),n.handleSearchSettings=function(e){n.setState({searchFilter:e.target.value})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.user&&this.props.refresh(this.props.user._id)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h2",null,"Search"),o.a.createElement("form",null,o.a.createElement("input",{type:"text",name:"query",value:this.state.query,onChange:this.formHandleChange}),o.a.createElement("input",{type:"radio",id:"all",name:"searchFilter",value:"",onChange:this.handleSearchSettings,checked:""===this.state.searchFilter}),o.a.createElement("label",{htmlFor:"all"},"All Fields"),o.a.createElement("input",{type:"radio",id:"intitle:",name:"searchFilter",value:"intitle:",onChange:this.handleSearchSettings,checked:"intitle:"===this.state.searchFilter}),o.a.createElement("label",{htmlFor:"intitle:"},"Just Title"),o.a.createElement("input",{type:"radio",id:"inauthor:",name:"searchFilter",value:"inauthor:",onChange:this.handleSearchSettings,checked:"inauthor:"===this.state.searchFilter}),o.a.createElement("label",{htmlFor:"inauthor:"},"Just Author"),o.a.createElement("input",{type:"radio",id:"inpublisher:",name:"searchFilter",value:"inpublisher:",onChange:this.handleSearchSettings,checked:"inpublisher:"===this.state.searchFilter}),o.a.createElement("label",{htmlFor:"inpublisher:"},"Just Publisher"),o.a.createElement("input",{type:"radio",id:"isbn:",name:"searchFilter",value:"isbn:",onChange:this.handleSearchSettings,checked:"isbn:"===this.state.searchFilter}),o.a.createElement("label",{htmlFor:"isbn:"},"Just ISBN")),o.a.createElement("h2",null,"Result"),o.a.createElement("ul",null,this.state.visibleResults.map((function(t){return o.a.createElement("div",{key:t.id},o.a.createElement(R,{book:t}),e.props.user?o.a.createElement(N,{bookId:t.id}):o.a.createElement(i.b,{to:"/login"},"log in to add this book to your library."))})),this.state.results.length>3?this.state.expandedSearch?o.a.createElement("button",{onClick:this.toggleExpandedSearch},"Show less results"):o.a.createElement("button",{onClick:this.toggleExpandedSearch},"Show more results"):null,this.state.expandedSearch?null:"some additional control"))}}]),t}(a.Component));var A=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"This is the Home Page"),o.a.createElement(M,null))},H=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,o=t.password;n.props.signup(a,o)},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(S.a)({},a,o))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return o.a.createElement("div",null,o.a.createElement("h1",null,"Sign Up"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"email:"),o.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",value:"Signup"})),o.a.createElement("p",null,"Already have account?"),o.a.createElement(i.b,{to:"/login"}," Login"))}}]),t}(a.Component)),J=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,o=t.password;n.props.login(a,o)},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(S.a)({},a,o))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return o.a.createElement("div",null,o.a.createElement("h1",null,"Login"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"email:"),o.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(a.Component)),U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={query:""},n.handleChange=function(e){e.preventDefault();var t=e.target,a=t.value,o=t.name;n.props.filterList(a),n.setState(Object(S.a)({},o,a))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("input",{type:"text",name:"query",value:this.state.query,onChange:this.handleChange,placeholder:"Filter by title"})))}}]),t}(a.Component),P=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={newCollection:""},n.addToCollection=function(e){e.preventDefault();var t=n.getItemList(e.target.id),a=[];a.push.apply(a,[e.target.attributes.getNamedItem("bookid").value].concat(Object(F.a)(t))),B(e.target.id,a,e.target.name),n.props.refresh(n.props.user._id),n.forceUpdate()},n.removeFromCollection=function(e){e.preventDefault();var t=n.getItemList(e.target.id),a=t.indexOf(e.target.attributes.getNamedItem("bookid").value);a>-1&&t.splice(a,1),B(e.target.id,t,e.target.name),n.props.refresh(n.props.user._id),n.forceUpdate()},n.getItemList=function(e){return n.props.user.collections.filter((function(t){return t._id===e}))[0].items},n.formHandleChange=function(){var e=Object(w.a)(C.a.mark((function e(t){var a,o,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target,o=a.value,r=a.name," "===o[o.length-1]&&(o=o.slice(0,-1)),n.setState(Object(S.a)({},r,o));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.addToNewColl=function(e){e.preventDefault(),D(n.props.user._id,[e.target.attributes.getNamedItem("bookid").value],n.state.newCollection),n.setState({newCollection:""},(function(){return n.props.refresh(n.props.user._id)}))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.props.user.collections.map((function(t){return t.items.includes(e.props.bookId)?o.a.createElement("button",{key:t._id,onClick:e.removeFromCollection,id:t._id,bookid:e.props.bookId,name:t.name,variant:"dark"},"Remove from #",t.name):o.a.createElement("button",{key:t._id,onClick:e.addToCollection,id:t._id,bookid:e.props.bookId,name:t.name,variant:"light"},"Add to #",t.name)})),o.a.createElement("form",null,"#",o.a.createElement("input",{type:"text",name:"newCollection",placeholder:"newCollection",onChange:this.formHandleChange,value:""+this.state.newCollection}),o.a.createElement("button",{type:"submit",bookid:this.props.bookId,onClick:this.addToNewColl},"Create + add")))}}]),t}(a.Component)),q=k(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.props.loadedBooks.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(R,{book:e}),o.a.createElement(P,{bookId:e.id}))})))}}]),t}(a.Component)),Q=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={allBookIds:[],loadedBooks:[],loadedBooksDisplay:[],loading:!0,nrOfAllBooks:0,nrOfBooksLoaded:0,nrOfBooksPerLoad:10},n.consolidateBookIds=function(){var e=[];n.props.user.collections.forEach((function(t){t.items.map((function(t){e.push(t)}))}));var t=new Set(e);return Object(F.a)(t)},n.loadBooks=function(){var e=Object(w.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[];try{t.forEach((function(e){x(e).then((function(e){n.push(e)}))}))}catch(a){console.log(a)}return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadhelper=function(){void 0===n.state.loadedBooks[0]?console.log("loading"):console.log(n.state.loadedBooks[0]),setTimeout((function(){n.setState({loading:!1},(function(){console.log("5 - set sate to not loading"),console.log(n.state.loadedBooks[0])}))}),5e3)},n.filterList=function(e){var t=Object(F.a)(n.state.loadedBooks);t=t.filter((function(t){return t.volumeInfo.title.toLowerCase().includes(e.toLowerCase())})),n.setState({loadedBooksDisplay:t})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.consolidateBookIds();this.setState({allBookIds:t},(function(){console.log("1 - ids consolidated")}));var n=this.loadBooks(t).then(console.log("2 - loaded books are read: "));Promise.resolve(n).then((function(t){console.log("resolved loadedBooks",t),e.setState({loadedBooks:t,loadedBooksDisplay:t},(function(){console.log("3 - updated the state"),console.log(" 4 - books after set state ",e.state.loadedBooks),e.loadhelper()}))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"My Library"),o.a.createElement("h2",null,"See all your books, ",this.props.user.email),this.state.loading?"Books are getting loaded":o.a.createElement("div",null,o.a.createElement(U,{filterList:this.filterList}),o.a.createElement(q,{loadedBooks:this.state.loadedBooksDisplay})))}}]),t}(a.Component)),z=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={markedForRemoval:!1,buttonText:"Remove"},n.toggleRemove=function(e){e.preventDefault();var t=!n.state.markedForRemoval,a="Remove"===n.state.buttonText?"Keep":"Remove";n.setState({markedForRemoval:t,buttonText:a}),t?n.props.doMarkForRemove(n.props.book.id):n.props.undoMarkForRemove(n.props.book.id)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("li",{key:this.props.book.id},o.a.createElement("span",null,o.a.createElement(i.b,{to:"/book/".concat(this.props.book.id)},this.props.book.volumeInfo.title," ")," - ",this.props.book.volumeInfo.authors.map((function(e){return e})),o.a.createElement("button",{onClick:this.toggleRemove},this.state.buttonText)))}}]),t}(a.Component),W=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={itemsToRemove:"",booklist:!1,edited:!1,itemsResolved:[],loading:!1},n.doMarkForRemove=function(e){var t=[];t.push.apply(t,[e].concat(Object(F.a)(n.state.itemsToRemove))),n.setState({itemsToRemove:t},(function(){n.sthToSaveUpdater(),console.log(n.state.itemsToRemove)}))},n.undoMarkForRemove=function(e){var t=n.state.itemsToRemove,a=t.indexOf(e);a>-1&&t.splice(a,1),n.setState({itemsToRemove:t},(function(){n.sthToSaveUpdater(),console.log(n.state.itemsToRemove)}))},n.sthToSaveUpdater=function(){"object"==typeof n.state.itemsToRemove&&n.state.itemsToRemove.length>0?n.setState({edited:!0},(function(){return console.log("s.th. to update later? ",n.state.edited)})):n.setState({edited:!1},(function(){return console.log("s.th. to update later? ",n.state.edited)}))},n.toggleBookList=function(e){n.state.booklist||n.loadBooks(),n.setState({booklist:!n.state.booklist})},n.saveAndClose=function(e){var t=n.props.items;n.state.itemsToRemove.forEach((function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)})),B(n.props.collid,t,n.props.collName),n.props.refresh(n.props.user._id),n.setState({itemsResolved:[]}),n.toggleBookList()},n.loadBooks=function(){0===n.state.itemsResolved.length&&(n.setState({loading:!0}),n.props.items.forEach((function(e){x(e).then((function(e){var t=[];t.push.apply(t,[e].concat(Object(F.a)(n.state.itemsResolved))),n.setState({itemsResolved:t},(function(){n.state.itemsResolved.length===n.props.items.length&&n.setState({loading:!1},(function(){return console.log("finished loading: ",n.state.itemsResolved)}))}))}))})))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.booklist?this.state.loading?"Currently loading":o.a.createElement("div",null,this.state.edited?o.a.createElement("button",{onClick:this.saveAndClose},"Save & Hide"):o.a.createElement("button",{onClick:this.toggleBookList},"Hide Books"),o.a.createElement("ul",null,this.state.itemsResolved.map((function(t){return o.a.createElement(z,{key:t.id,book:t,doMarkForRemove:e.doMarkForRemove,undoMarkForRemove:e.undoMarkForRemove})})))):this.props.items.length>0?o.a.createElement("button",{onClick:this.toggleBookList},"Show books"):null)}}]),t}(a.Component)),X=k(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={newName:"",editmode:!1},n.nameEditField=function(e){e.preventDefault(),n.setState({editmode:!0,newName:n.props.collection.name})},n.formHandleChange=function(e){e.preventDefault();var t=e.target,a=t.value,o=t.name;n.setState(Object(S.a)({},o,a))},n.saveName=function(){var e=Object(w.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.state.newName===n.props.collection.name){e.next=10;break}return e.prev=2,e.next=5,B(n.props.collection._id,n.props.collection.items,n.state.newName);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("error while saving",e.t0);case 10:n.props.refresh(n.props.user._id),n.setState({editmode:!1,newName:""});case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.collection,t=e.name,n=e.items,a=e._id;return o.a.createElement("li",{className:"inlineEdit",key:this.props.collection._id},this.state.editmode?o.a.createElement("div",null,o.a.createElement("form",{className:"inlineEdit"},o.a.createElement("button",{onClick:this.saveName}," ",this.state.newName!==this.props.collection.name?"Save name":"Keep name"," ")," ",o.a.createElement("input",{type:"text",name:"newName",value:this.state.newName,onChange:this.formHandleChange})),o.a.createElement("span",null,", with ",n.length,' item(s) "')):o.a.createElement("div",null,o.a.createElement("button",{onClick:this.nameEditField},"Edit name")," ",t,", with"," ",n.length," item(s)"," "),o.a.createElement(W,{key:a,collid:a,collName:t,items:n}))}}]),t}(a.Component)),K=k(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.refresh(this.props.user._id)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"My Collections"),o.a.createElement("ul",null,this.props.user.collections.map((function(e){return o.a.createElement(X,{key:e._id,collection:e})}))))}}]),t}(a.Component)),Y=k(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Private Route"),o.a.createElement("h1",null,"Welcome ",this.props.user.username))}}]),t}(a.Component));function Z(e){console.log(" >>",e);var t=e.book.volumeInfo,n=t.title,a=t.subtitle,r=t.authors,l=t.publisher,i=t.publishedDate,s=t.description,c=t.imageLinks;return o.a.createElement("div",null,c.small?o.a.createElement("img",{src:c.small,alt:""}):o.a.createElement("img",{src:"images/Image-Coming-Soon.png",alt:""}),o.a.createElement("h1",null,n||"Without title"),a?o.a.createElement("h2",null,a):null,o.a.createElement("h3",null,r?"From "+r.map((function(e){return e+" "})):"Unknown Authors"),o.a.createElement("p",null,l?"Published "+(i||null)+" by "+l:null),s?o.a.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):"Description currently not available")}var G=k(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={book:{},loading:!0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.refresh(this.props.user._id),x(this.props.match.params.id).then((function(t){console.log(t),e.setState({book:t},(function(){return e.setState({loading:!1})}))}))}},{key:"render",value:function(){return this.state.loading?"loading":o.a.createElement("div",null,o.a.createElement(Z,{book:this.state.book}),o.a.createElement(P,{key:this.state.book.id,bookId:this.state.book.id}))}}]),t}(a.Component)),V=(n(66),n(20));var $=k((function(e){var t=e.component,n=e.isLoggedIn,a=Object(V.a)(e,["component","isLoggedIn"]);return(o.a.createElement(y.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(y.a,{to:"/"}):n?void 0:o.a.createElement(t,e)}})))}));var ee=k((function(e){var t=e.component,n=e.isLoggedIn,a=Object(V.a)(e,["component","isLoggedIn"]);return o.a.createElement(y.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(t,e):n?void 0:o.a.createElement(y.a,{to:"/login"})}}))})),te=(n(67),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(O,null),o.a.createElement(y.d,null,o.a.createElement(y.b,{exact:!0,path:"/",component:A}),o.a.createElement($,{exact:!0,path:"/signup",component:H}),o.a.createElement($,{exact:!0,path:"/login",component:J}),o.a.createElement(ee,{exact:!0,path:"/collections",component:K}),o.a.createElement(ee,{exact:!0,path:"/collections/:id",component:Y}),o.a.createElement(ee,{exact:!0,path:"/library",component:Q}),o.a.createElement(ee,{exact:!0,path:"/book/:id",component:G})),o.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}))}}]),t}(a.Component));l.a.render(o.a.createElement(i.a,null,o.a.createElement(E,null,o.a.createElement(te,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.35f29857.chunk.js.map